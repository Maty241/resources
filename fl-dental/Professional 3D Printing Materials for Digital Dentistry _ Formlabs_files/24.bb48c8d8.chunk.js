(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{I4Wp:function(e,t,n){},IuzP:function(e,t,n){},JhcM:function(e,t,n){},KA4J:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var a=n("efbE"),r=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],c=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return r.includes(e)?e:"en"},i=function getTrendingGiphys(e){return a.h.get("/trending",{params:{limit:e,rating:"pg"}})},o=function getSearchGiphys(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return a.h.get("/search",{params:{limit:t,q:e,lang:c(n),rating:"pg"}})}},MWt3:function(e,t,n){},"PGb/":function(e,t,n){},UXBQ:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return c});var a=n("efbE"),r=function uploadAttachment(e,t){var n=new FormData;return n.append("conversationId",t),n.append("file",e),a.a.post("/attachments",n)},c=function fetchAttachments(e,t){return a.a.get("/attachments",{params:{id:e},cancelToken:t})}},dZmz:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("efbE"),r=n("rAc1"),c=n("l6A5"),i=function urlIdentity(e){return Object(r.a)(e)},o=(Object(c.a)(i,function(e){return a.k.get("/",{params:{url:encodeURI(e)}})}),Object(c.a)(i,function(e){return a.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}))},fTFZ:function(e,t,n){"use strict";var a=n("nfbA"),r=n("WwEg"),c=n("s8DI"),i=n("nJ3u"),o=n("O94r"),s=n.n(o),l=n("7IKl"),u=n("lE29"),d=n("ERkP"),m=n.n(d),f=n("Tr4L"),b=n("uDfI"),g=(n("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(u.a)().widgetBackgroundAlpha,n=Object(b.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),a=n.isTyping,r=void 0!==a&&a,c=n.userId,i=Object(l.a)(c);return r?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=n("ZGTz"),v=n("oImb"),O=n("+Kbs"),h=n("908p"),j=n("nQD+"),E=n("HXmn"),y=n("mZ4K"),w=n("P+wr"),A=n("6wvX"),k=n("z24s"),I=n("jITz"),T=n("6rzO"),C=n("58kB"),N=n("uQkC"),L=n("hNWd"),S=n("+oIK"),U=n("LVcX"),B=n("U505"),R=n("ovDp"),F=n("vwUF"),M=n("0lfv");n("IuzP");n.d(t,"a",function(){return z});var z,P="GIF",_="TEXT",D=function validateMessageText(e){return e&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(z||(z={}));t.b=function Composer(e){var t=e.onSubmit,n=e.activeConversationId,o=e.state,l=void 0===o?z.AVAILABLE:o,V=e.disabled,x=void 0!==V&&V,H=e.chatHidden,Z=Object(d.useRef)(null),G=Object(d.useRef)(null),K=Object(d.useRef)(null),W=Object(d.useRef)(null),J=Object(d.useState)(""),X=Object(c.a)(J,2),q=X[0],Q=X[1],Y=Object(d.useState)(!1),$=Object(c.a)(Y,2),ee=$[0],te=$[1],ne=Object(d.useState)([]),ae=Object(c.a)(ne,2),re=ae[0],ce=ae[1],ie=Object(k.a)(Z),oe=Object(k.a)(G),se=Object(k.a)(K),le=Object(k.a)(W),ue=Object(b.c)(function(e){return e.view}),de=ue.matchedHours,me=ue.chatOpen,fe=Object(b.c)(function(e){return e.conversations.attachments}),be=Object(b.c)(function(e){return e.session.endUser.id}),ge=Object(b.c)(function(e){return Object(U.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,pe=Object(f.a)().t,ve=Object(A.a)(!0),Oe=Object(y.a)(),he=Object(u.a)(),je=he.activeColor,Ee=he.widgetBackgroundColor,ye=Object(C.a)(Oe).recipient,we=Object(T.a)({inputRef:Z}),Ae=we.pastedFiles,ke=we.clearFiles,Ie=Object(I.a)({targetKey:"Enter"}),Te=Object(N.a)({activeConversationId:n}),Ce=Te.sendTypingStarted,Ne=Te.sendTypingFinished,Le=Object(w.a)({activeConversation:n,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){ce(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),ke()},[])}),Se=Le.attachmentState,Ue=Le.uploadAttachments,Be=Le.resetAttachmentState,Re=l===z.AVAILABLE||l===z.AVAILABLE_BUTTONS,Fe=Object(R.a)({onDrop:Ue,disabled:x||!Re||!ge}),Me=Fe.getRootProps,ze=Fe.getInputProps,Pe=Fe.open,_e=D(q)||re.length,De=Se===F.b.PENDING,Ve=Se===F.b.ERROR||Se===F.b.SIZE_ERROR;var xe=Object(d.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,c=re?{attachments:re}:{},i=n?{}:{sentWelcomeMessage:de,sentOfflineHours:!de};Ne();var o=r===_?Object(M.q)(e):e;t({message:Object(S.a)(Object(a.a)({message:o,activeConversation:n||null,authorId:be,attributes:i},c))}),Q(""),ce([]),Be()},[n,be,de,t,Be,Ne,re]);Object(d.useEffect)(function(){ge?Ae.length&&!De&&Ue(Ae):ke()},[ge,De,ke,Ae,Ue]),Object(d.useEffect)(function(){Ie&&(D(q)||re.length)&&xe(q,_)},[Ie,q,xe,re.length]),Object(d.useEffect)(function(){n&&Q("")},[n]),Object(d.useEffect)(function(){var e=Z,t=l===z.AVAILABLE_BUTTONS;return me&&Re&&!t&&!H&&e.current&&e.current.focus(),function(){return e.current&&e.current.blur()}},[H,me,Re,l]);var He=Object(d.useMemo)(function(){return Re?pe("composer.replyToPlaceholder",{name:ye.name}):pe(l===z.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[Re,ye.name,l,pe]),Ze=ge&&!!n,Ge=!_e&&!!n,Ke=!!_e,We=Ze||Ke||Ge,Je=x||De;return m.a.createElement(m.a.Fragment,null,(re.length||De||Ve)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},Ve&&m.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},pe(Se===F.b.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(j.a,{onClick:function onClick(){Be(),ke()},className:"drift-widget-attachment-send-status--close",disabled:x},m.a.createElement(O.j,{width:10,height:10}))),(re.length||De)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(r.a)(re),Object(r.a)(De?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:fe[e]?fe[e].id:"file-upload-loader"},fe[e]&&!fe.pending&&m.a.createElement(j.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){ce(function(t){return Object(B.a)([e],t)})}(e)},disabled:x},m.a.createElement(O.j,{width:6,height:6})),fe[e]&&!fe.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(O.k,{width:16,height:16})):null}(fe[e]):m.a.createElement(E.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-input.keyboard-focused {\n            ".concat(Object(i.d)(Ee,je),"\n          }\n\n          .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n            ").concat(Object(i.a)(je,24,-2),"\n          }\n\n          .drift-widget-composer-actions button.keyboard-focused,\n          .drift-widget-composer-send-button.keyboard-focused {\n            ").concat(Object(i.c)(je),"\n          }\n        ")),m.a.createElement("div",Object.assign({},Me({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":ve}),tabIndex:-1}),ge&&m.a.createElement("input",ze()),m.a.createElement(g,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,Re&&q.length?q:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},He),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":ie}),ref:Z,placeholder:He,value:Re?q:"",onChange:function onTextareaChange(e){Ie||Ae.length||(Q(e.target.value),Ce())},"aria-label":"message composer",maxLength:4096,disabled:x||!Re||!!Ae.length,tabIndex:0,id:"drift-widget-composer-input"}),Re&&!ve&&m.a.createElement("button",{ref:G,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":oe}),onClick:function onEmojiButtonClick(){l!==z.AVAILABLE||x||te(!ee)},disabled:x,"aria-expanded":ee,"aria-label":"emojis"},m.a.createElement(L.a,null))),Re&&!ve&&m.a.createElement(p.a,{open:ee,onAddEmoji:function onAddEmoji(e){te(!ee),Re&&!x&&(Q(e),Z.current&&Z.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){G.current&&G.current.contains(e.target)||te(!1)}}),Re&&We&&m.a.createElement("div",{className:"drift-widget-composer-actions"},Ze&&m.a.createElement("button",{ref:K,className:s()({"keyboard-focused":se}),onClick:Pe,"aria-label":"add an attachment",disabled:x},m.a.createElement(O.a,null)),Ge&&m.a.createElement(v.a,{onAddGiphy:function onAddGiphy(e){return xe(e,P)},disabled:x}),Ke&&m.a.createElement("button",{className:s()("af drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":Je,"keyboard-focused":le}),"aria-label":"send message",onClick:function onClick(){return xe(q,_)},disabled:x||De,ref:W},m.a.createElement(h.a,{color:"#".concat(je)})))))}},jKoD:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("efbE"),r=function recordConsent(e,t){return a.e.post("/end_users/".concat(e,"/consent"),{consentId:"has_consent",message:t})}},pgTp:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return u});var a=n("WwEg"),r=n("efbE"),c=n("JBtm"),i=n.n(c),o=function fetchAgentAvailability(e){var t=e.agentId,n=e.additionalAgents,c=void 0===n?[]:n,o=e.meetingType,s=e.start,l=e.orgMeetingType;return r.n.get("scheduling/".concat(t,"/availability"),{params:{meetingType:o,start:s,additionalAgents:Object(a.a)(c),orgMeetingType:l},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},s=function fetchCompanyAvailability(e){var t=e.orgMeetingType,n=e.agentIds,a=void 0===n?[]:n;return r.n.get("/scheduling/availability/combined/v2",{params:{orgMeetingType:t,agentIds:a},paramsSerializer:function paramsSerializer(e){return i.a.stringify(e)}})},l=function scheduleMeeting(e){var t=e.endUserTimeZone,n=e.availabilitySlot,a=e.agentId,c=e.meetingType,i=e.meetingSource,o=e.conversationId,s=e.bookedByUserId,l=e.orgMeetingType;return r.n.post("scheduling/".concat(a,"/schedule"),n,{params:{conversationId:o,meetingSource:i,meetingType:c,timeZone:t,bookedByUserId:s,orgMeetingType:l}})},u=function scheduleCompanyMeeting(e){var t=e.availabilitySlot,n=e.availableAgents,a=e.conversationId,c=e.meetingSource,i=e.meetingType,o=e.endUserTimeZone,s=e.bookedByUserId,l=e.orgMeetingType;return r.n.post("/scheduling/schedule/combined",{availabilitySlot:t,availableAgents:n,conversationId:a,meetingSource:c,meetingType:i,endUserTimeZone:o,bookedByUserId:s,orgMeetingType:l})}},"tGI+":function(e,t,n){"use strict";var a=n("NJA7"),r=n("fw6E"),c=n("K7i0"),i=n("+oIK"),o=n("da4L"),s=n("ERkP"),l=n.n(s),u=n("uDfI");t.a=function AgentRequestedOptions(e){var t=e.message,n=t.attributes,s=t.id,d=t.conversationId,m=Object(u.b)(),f=Object(u.c)(function(e){return e.session}).endUser,b=Object(r.a)().conversationHistoryOpen,g=Object(u.c)(function(e){return e.view}).chatOpen,p=Object(o.k)(t)&&g,v=function doSendMessage(e){var n=e.label;return function(){var e=Object(i.a)({message:n,activeConversation:d,authorId:f.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId}});m(Object(c.l)({message:e}))}};return l.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set"},n.buttons.map(function(e,t){return l.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(s,"-").concat(t)},l.a.createElement(a.a,{onClick:v(e),invertOnHover:!0,forceFocus:0===t&&p,disabled:b,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}},vkRn:function(e,t,n){"use strict";var a=n("nJ3u"),r=n("O94r"),c=n.n(r),i=n("noex"),o=n("yEsl"),s=n("fw6E"),l=n("z24s"),u=n("hhdZ"),d=n("58kB"),m=n("6fy/"),f=n("SsZN"),b=n("Wjfv"),g=n("K7i0"),p=n("da4L"),v=n("LVcX"),O=n("i9gz"),h=n("ERkP"),j=n.n(h),E=n("Tr4L"),y=n("uDfI"),w=n("A5mO"),A=(n("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,n=void 0===t?{}:t,a=Object(s.a)().onToggleConversationHistory,r=Object(h.useRef)(null),A=Object(E.a)().t,k=Object(l.a)(r),I=Object(y.b)(),T=Object(m.a)(),C=Object(h.useMemo)(function(){return Object(v.a)(null,["conversation","id"],n)},[n]),N=Object(u.a)(C),L=Object(h.useMemo)(function(){return Object(v.a)(null,["authorId"],N)},[N]),S=Object(d.a)(L).recipient,U=Object(p.h)(N);if(Object(O.a)(N))return null;var B=N.createdAt,R=N.attributes,F=void 0===R?{}:R,M=Object(w.a)(B).isAfter(w.a.today())?Object(w.a)(B).unixFmt(A("dt.format.time.short")):Object(w.a)(B).unixFmt(A("dt.format.date.short")),z=U?T.name:S.name,P="Conversation with ".concat(S.name).concat(F.preview?" - ".concat(U?"You":"",': "').concat(F.preview,'"'):"",", ").concat(M," - Click to open");return j.a.createElement("li",{className:c()("drift-widget-conversation-list-item",{"keyboard-focused":k})},j.a.createElement("button",{onClick:function toggleConversation(e){return function(){e&&(a(!1),I(Object(b.a)()),I(Object(g.m)({conversationId:e})),Object(f.f)(e))}}(n.conversation.id),"aria-label":P,ref:r},U?j.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:T.avatar}):j.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:S.avatarUrl,id:L}),j.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},j.a.createElement("h2",null,z),j.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},M),j.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},F.preview))))}),k=n("lE29"),I=n("DboL"),T=n("9xv8");n("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(y.c)(function(e){return e.conversations.conversations}),n=Object(h.useMemo)(function(){return Object(T.c)(Object(I.a)(t),"updatedAt")},[t]),r=Object(h.useMemo)(function(){return j.a.createElement("ul",{className:"drift-widget-conversation-history-list"},n.map(function(e){return j.a.createElement(A,{key:e.conversation.id,conversation:e})}))},[n]),i=Object(k.a)().activeColor;return j.a.createElement("div",{className:c()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},j.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(a.c)(i),"\n          }\n        ")),e&&r)}},xyhj:function(e,t,n){"use strict";var a=n("nfbA"),r=n("nJ3u"),c=n("O94r"),i=n.n(c),o=n("z24s"),s=n("o3t1"),l=n("lE29"),u=n("ERkP"),d=n.n(u),m=n("uDfI"),f=n("PjZB"),b=n("7oto"),g=n("rTkt");n("MWt3");t.a=function CtaButton(e){var t=e.ctaUrl,n=e.ctaCopy,c=e.ctaType,p=e.onClick,v=e.ariaHidden,O=Object(s.a)(),h=O.hoverProps,j=O.isHovered,E=Object(l.a)(),y=E.activeColor,w=E.backgroundStyles,A=Object(m.c)(function(e){return e.campaigns.activeCampaign}),k=Object(u.useRef)(null),I=Object(o.a)(k),T=Object(u.useMemo)(function(){var e=j?Object(g.c)(w.background,-5):w.background;return Object(a.a)(Object(a.a)({},w),{},{background:e})},[w,j]),C=function onCtaClick(e){c===f.a.CHAT_RESPONSE?Object(b.a)({topic:"drift-api:open-chat"}):c===f.a.SCHEDULE_MEETING&&Object(b.a)({topic:"drift-api:schedule-meeting",message:{scheduleMeetingWith:A.attributes.senderId,options:{activeCampaign:A}}}),p&&p(e)};return Object(u.useEffect)(function(){var e=k;return setTimeout(function(){return e.current&&e.current.focus()},50),function(){return e.current&&e.current.blur()}},[]),c===f.a.LINK_TO_URL?d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,"\n            .drift-widget-announcement-cta-link-wrapper a.keyboard-focused {\n              ".concat(Object(r.d)("FFFFFF",y),"\n            }\n          ")),d.a.createElement("div",{className:"drift-widget-announcement-cta drift-widget-announcement-cta-link-wrapper",hidden:v},d.a.createElement("a",Object.assign({className:i()("drift-widget-announcement-cta-link",{"keyboard-focused":I&&!v}),href:t,onClick:C,target:"_blank",rel:"noopener noreferrer",ref:k,"aria-describedby":"drift-widget-announcement-cta-description",style:T,"aria-hidden":v},h),n),d.a.createElement("span",{hidden:!0,id:"drift-widget-announcement-cta-description"},n+"; opens an external site in a new window"))):d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,"\n          .drift-widget-announcement-cta.keyboard-focused {\n            ".concat(Object(r.d)("FFFFFF",y),"\n          }\n        ")),d.a.createElement("button",Object.assign({className:i()("drift-widget-announcement-cta",{"keyboard-focused":I}),onClick:C,style:T,ref:k},h),n))}}}]);